<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶π‡¶æ‡¶¶‡ßÄ‡¶∏ ‡¶∏‡¶Ç‡¶ó‡ßç‡¶∞‡¶π</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Bengali:wght@400;500;700&family=Amiri:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #0f5d3a;
      --primary-dark: #0a3f28;
      --gold: #d4af37;
      --light-gold: #f0d88a;
      --bg: #f8f5ef;
      --card-bg: #ffffff;
      --text-dark: #1a1a1a;
      --text-light: #4a4a4a;
    }

    body {
      font-family: 'Noto Sans Bengali', sans-serif;
      background: linear-gradient(135deg, var(--bg) 0%, #f0ede5 100%);
      margin: 0;
      padding: 20px 15px;
      min-height: 100vh;
      color: var(--text-dark);
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="120" height="120"><circle cx="60" cy="60" r="50" fill="none" stroke="%23d4af37" stroke-width="0.5" opacity="0.05"/></svg>');
      background-repeat: repeat;
    }

    .container { max-width: 1100px; margin: 0 auto; }

    header {
      text-align: center;
      margin-bottom: 40px;
      position: relative;
    }

    h1 {
      color: var(--primary);
      font-size: 3rem;
      margin: 0;
      letter-spacing: 1px;
      text-shadow: 2px 2px 6px rgba(15,93,58,0.2);
    }

    .subtitle {
      color: var(--text-light);
      font-size: 1.2rem;
      margin-top: 10px;
    }

    .crescent {
      font-size: 3rem;
      color: var(--gold);
      position: absolute;
      top: -15px;
      right: 20px;
      opacity: 0.8;
      transform: rotate(-15deg);
    }

    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      justify-content: center;
      margin-bottom: 30px;
      align-items: center;
    }

    .input-group {
      display: flex;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: center;
    }

    select, input[type="number"] {
      padding: 14px 18px;
      font-size: 1.1rem;
      border: 2px solid #e0d9c0;
      border-radius: 12px;
      min-width: 220px;
      background: #fff;
      transition: all 0.3s;
    }

    select:focus, input:focus {
      border-color: var(--gold);
      box-shadow: 0 0 10px rgba(212,175,55,0.2);
    }

    button {
      padding: 14px 28px;
      font-size: 1.1rem;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 5px 15px rgba(15,93,58,0.25);
    }

    button:hover {
      background: var(--primary-dark);
      transform: translateY(-3px);
      box-shadow: 0 10px 25px rgba(15,93,58,0.35);
    }

    .random-btn {
      background: linear-gradient(135deg, #b8860b, #d4af37);
      color: #1a1a1a;
      font-weight: bold;
      box-shadow: 0 5px 15px rgba(212,175,55,0.3);
      padding: 16px 50px;
      font-size: 1.3rem;
      margin: 0 auto 50px;
      display: block;
      border-radius: 20px;
      position: relative;
      overflow: hidden;
      transition: all 0.4s;
    }

    .random-btn::after {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255,255,255,0.6) 10%, transparent 10.5%);
      background-size: 10px 10px;
      animation: sparkle 2s linear infinite;
      pointer-events: none;
    }

    @keyframes sparkle {
      0% { transform: rotate(0deg) translate(0,0); }
      100% { transform: rotate(360deg) translate(0,0); }
    }

    .random-btn:hover {
      background: linear-gradient(135deg, #d4af37, #f0d88a);
      transform: translateY(-4px);
      box-shadow: 0 12px 30px rgba(212,175,55,0.35);
    }

    .loading {
      text-align: center;
      font-size: 1.5rem;
      color: var(--primary);
      margin: 50px 0;
      animation: pulse 2s infinite;
    }

    @keyframes pulse { 0%,100% {opacity:0.7;} 50% {opacity:1;} }

    .hadith-card {
      background: var(--card-bg);
      border-radius: 20px;
      padding: 35px;
      margin: 0 auto 40px;
      box-shadow: 0 12px 35px rgba(0,0,0,0.08);
      border-left: 5px solid var(--gold);
      transition: all 0.4s ease;
      max-width: 95%;
      position: relative;
      overflow: hidden;
    }

    .hadith-card::before {
      content: "ÿ®ÿ≥ŸÖ ÿßŸÑŸÑŸá ÿßŸÑÿ±ÿ≠ŸÖŸÜ ÿßŸÑÿ±ÿ≠ŸäŸÖ";
      position: absolute;
      top: 10px;
      left: 10px;
      font-size: 5rem;
      color: rgba(212,175,55,0.05);
      pointer-events: none;
      transform: rotate(-20deg);
      font-family: 'Amiri', serif;
    }

    .hadith-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 20px 50px rgba(212,175,55,0.15);
    }

    .arabic {
      font-family: 'Amiri', 'Traditional Arabic', serif;
      font-size: 2.4rem;
      direction: rtl;
      text-align: right;
      margin-bottom: 25px;
      color: #8e44ad; /* Cute purple color for Arabic */
      line-height: 1.9;
      font-weight: 400;
    }

    .bengali {
      font-size: 1.4rem;
      margin: 20px 0;
      color: #2c2c2c;
      text-align: right;
      line-height: 1.8;
    }

    .reference {
      text-align: center;
      margin-top: 25px;
      font-size: 1.15rem;
      color: var(--text-light);
      font-weight: 500;
    }

    .grade {
      display: inline-block;
      padding: 6px 16px;
      border-radius: 30px;
      font-weight: bold;
      margin-left: 12px;
      font-size: 1rem;
      color: white;
    }

    .error-msg {
      color: #c0392b;
      font-size: 1.3rem;
      text-align: center;
      margin: 40px;
    }

    .max-info {
      font-size: 1rem;
      color: var(--text-light);
      font-weight: 500;
    }

    @media (max-width: 768px) {
      h1 { font-size: 2.2rem; }
      .controls { flex-direction: column; gap: 12px; }
      select, input, button { width: 100%; }
      .hadith-card { padding: 25px; }
      .arabic { font-size: 2rem; }
      .bengali { font-size: 1.25rem; }
    }
  </style>
</head>
<body>

<div class="container">
  <header>
    <h1>‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶π‡¶æ‡¶¶‡ßÄ‡¶∏ ‡¶∏‡¶Ç‡¶ó‡ßç‡¶∞‡¶π</h1>
    <p class="subtitle">‡¶∏‡¶π‡ßÄ‡¶π ‡¶π‡¶æ‡¶¶‡ßÄ‡¶∏ ‚Ä¢ ‡¶Ü‡¶∞‡¶¨‡¶ø + ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶Ö‡¶®‡ßÅ‡¶¨‡¶æ‡¶¶ ‚Ä¢ ‡¶á‡¶∏‡¶≤‡¶æ‡¶Æ‡¶ø‡¶ï ‡¶∏‡ßå‡¶®‡ßç‡¶¶‡¶∞‡ßç‡¶Ø‡ßá</p>
    <div class="crescent">üåô</div>
  </header>

  <div class="controls">
    <select id="bookSelect">
      <option value="">‡¶¨‡¶á ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®...</option>
      <option value="Bukhari">‡¶∏‡¶π‡ßÄ‡¶π ‡¶¨‡ßÅ‡¶ñ‡¶æ‡¶∞‡ßÄ</option>
      <option value="Muslim">‡¶∏‡¶π‡ßÄ‡¶π ‡¶Æ‡ßÅ‡¶∏‡¶≤‡¶ø‡¶Æ</option>
      <option value="AbuDaud">‡¶∏‡ßÅ‡¶®‡¶æ‡¶® ‡¶Ü‡¶¨‡ßÅ ‡¶¶‡¶æ‡¶â‡¶¶</option>
      <option value="At-tirmizi">‡¶ú‡¶æ‡¶Æ‡ßá ‡¶§‡¶ø‡¶∞‡¶Æ‡¶ø‡¶Ø‡ßÄ</option>
      <option value="Al-Nasai">‡¶∏‡ßÅ‡¶®‡¶æ‡¶® ‡¶®‡¶æ‡¶∏‡¶æ‡¶à</option>
      <option value="Ibne-Mazah">‡¶∏‡ßÅ‡¶®‡¶æ‡¶® ‡¶á‡¶¨‡¶®‡ßá ‡¶Æ‡¶æ‡¶ú‡¶æ‡¶π</option>
    </select>
    
    <div class="input-group">
      <input type="number" id="hadithNumber" placeholder="‡¶π‡¶æ‡¶¶‡¶ø‡¶∏ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ (‡¶Ø‡ßá‡¶Æ‡¶®: 1)" min="1" />
      <span id="maxInfo" class="max-info"></span>
    </div>
    
    <button onclick="loadHadith()">‡¶π‡¶æ‡¶¶‡¶ø‡¶∏ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶ì</button>
  </div>

  <button class="random-btn" onclick="getRandomHadith()">‡¶∞‚Äç‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶Æ ‡¶π‡¶æ‡¶¶‡ßÄ‡¶∏ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶ì</button>

  <div id="loading" class="loading" style="display:none;">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá... ‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®</div>

  <div id="results"></div>
</div>

<script>
const bookSelect = document.getElementById('bookSelect');
const hadithNumber = document.getElementById('hadithNumber');
const maxInfo = document.getElementById('maxInfo');
const loading = document.getElementById('loading');
const results = document.getElementById('results');
const baseURL = 'https://cdn.jsdelivr.net/gh/md-rifatkhan/hadithbangla@main/';
let currentBook = '';

const maxByBook = {
  Bukhari: 7563,
  Muslim: 7563,
  AbuDaud: 5274,
  'At-tirmizi': 3956,
  'Al-Nasai': 5761,
  'Ibne-Mazah': 4341
};

bookSelect.onchange = function() {
  currentBook = this.value;
  results.innerHTML = '';

  if (currentBook && maxByBook[currentBook]) {
    const maxNum = maxByBook[currentBook];
    hadithNumber.max = maxNum;
    hadithNumber.placeholder = `‡¶π‡¶æ‡¶¶‡¶ø‡¶∏ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ (‡ßß‚Äì${maxNum})`;
    maxInfo.textContent = `(‡¶∏‡¶∞‡ßç‡¶¨‡ßã‡¶ö‡ßç‡¶ö: ${maxNum})`;
    hadithNumber.value = '';

    results.innerHTML = `<p style="color:var(--primary); font-size:1.3rem; text-align:center;">
      ‡¶¨‡¶á ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶π‡ßü‡ßá‡¶õ‡ßá: ${this.options[this.selectedIndex].text} (‡¶Æ‡ßã‡¶ü ‡¶π‡¶æ‡¶¶‡¶ø‡¶∏: ${maxNum})
    </p>`;
  } else {
    hadithNumber.removeAttribute('max');
    hadithNumber.placeholder = "‡¶π‡¶æ‡¶¶‡¶ø‡¶∏ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ (‡¶Ø‡ßá‡¶Æ‡¶®: 1)";
    maxInfo.textContent = '';
    results.innerHTML = '';
  }
};

function getGradeHTML(grade) {
  if (!grade) return '<span class="grade" style="background:#bdc3c7;">‡¶ó‡ßç‡¶∞‡ßá‡¶°: ‡¶â‡¶≤‡ßç‡¶≤‡ßá‡¶ñ ‡¶®‡ßá‡¶á</span>';
  let color = '#bdc3c7';
  let icon = '';
  const lowerGrade = grade.toLowerCase();
  if (lowerGrade.includes('‡¶∏‡¶π‡¶ø‡¶π') || lowerGrade.includes('sahih')) { color='#27ae60'; icon='‚úîÔ∏è'; }
  else if (lowerGrade.includes('‡¶π‡¶æ‡¶∏‡¶æ‡¶®') || lowerGrade.includes('hasan')) { color='#f39c12'; icon='‚ö†Ô∏è'; }
  else if (lowerGrade.includes('‡¶¶‡ßÅ‡¶∞‡ßç‡¶¨‡¶≤') || lowerGrade.includes('daif') || lowerGrade.includes('‡¶ú‡¶Ø‡¶º‡ßÄ‡¶´')) { color='#e74c3c'; icon='‚ùå'; }
  return `<span class="grade" style="background:${color}">${icon} ${grade}</span>`;
}

async function loadHadith() {
  const num = parseInt(hadithNumber.value);
  if (!num || num < 1) return alert('‡¶∏‡¶†‡¶ø‡¶ï ‡¶π‡¶æ‡¶¶‡¶ø‡¶∏ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶¶‡¶ø‡¶®!');
  if (currentBook && maxByBook[currentBook] && num > maxByBook[currentBook]) {
    return alert(`‡¶è‡¶á ‡¶¨‡¶á‡¶Ø‡¶º‡ßá ‡¶∏‡¶∞‡ßç‡¶¨‡ßã‡¶ö‡ßç‡¶ö ‡¶π‡¶æ‡¶¶‡¶ø‡¶∏ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ${maxByBook[currentBook]}‡•§`);
  }
  if (!currentBook) return alert('‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡ßá ‡¶¨‡¶á ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®!');
  
  loading.style.display = 'block';
  results.innerHTML = '';
  
  try {
    const url = baseURL + currentBook + '/hadith/' + num + '.json';
    const res = await fetch(url);
    if (!res.ok) throw new Error('‡¶π‡¶æ‡¶¶‡¶ø‡¶∏ ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø (‡¶ï‡ßã‡¶°: ' + res.status + ')');
    const data = await res.json();
    const hadith = data.hadith || data;
    
    results.innerHTML = `
      <div class="hadith-card">
        <div class="arabic">${hadith.ar || '(‡¶Ü‡¶∞‡¶¨‡¶ø ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶®‡ßá‡¶á)'}</div>
        <div class="bengali">${hadith.bn || '(‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶Ö‡¶®‡ßÅ‡¶¨‡¶æ‡¶¶ ‡¶®‡ßá‡¶á)'}</div>
        <div class="reference">
          ‡¶ó‡ßç‡¶∞‡¶®‡ßç‡¶•: ${bookSelect.options[bookSelect.selectedIndex].text} ‚Ä¢ ‡¶π‡¶æ‡¶¶‡¶ø‡¶∏ ‡¶®‡¶Ç: ${num} ${getGradeHTML(hadith.grade)}
        </div>
      </div>`;
  } catch (err) {
    results.innerHTML = `<p class="error-msg">‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ: ${err.message}<br>‡¶á‡¶®‡ßç‡¶ü‡¶æ‡¶∞‡¶®‡ßá‡¶ü / ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ / ‡¶¨‡¶á ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>`;
  }
  loading.style.display = 'none';
}

async function getRandomHadith() {
  if (!currentBook) return alert('‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡ßá ‡¶¨‡¶á ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®!');
  const max = maxByBook[currentBook] || 5000;
  const randomNum = Math.floor(Math.random() * max) + 1;
  
  loading.style.display = 'block';
  results.innerHTML = '';
  
  try {
    const url = baseURL + currentBook + '/hadith/' + randomNum + '.json';
    const res = await fetch(url);
    if (!res.ok) throw new Error('‡¶∞‚Äç‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶Æ ‡¶π‡¶æ‡¶¶‡¶ø‡¶∏ ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø');
    const data = await res.json();
    const hadith = data.hadith || data;
    
    results.innerHTML = `
      <div class="hadith-card">
        <div class="arabic">${hadith.ar || '(‡¶Ü‡¶∞‡¶¨‡¶ø ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶®‡ßá‡¶á)'}</div>
        <div class="bengali">${hadith.bn || '(‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶Ö‡¶®‡ßÅ‡¶¨‡¶æ‡¶¶ ‡¶®‡ßá‡¶á)'}</div>
        <div class="reference">
          ‡¶ó‡ßç‡¶∞‡¶®‡ßç‡¶•: ${bookSelect.options[bookSelect.selectedIndex].text} ‚Ä¢ ‡¶π‡¶æ‡¶¶‡¶ø‡¶∏ ‡¶®‡¶Ç: ${randomNum} (‡¶∞‚Äç‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶Æ) ${getGradeHTML(hadith.grade)}
        </div>
      </div>`;
  } catch (err) {
    results.innerHTML = `<p class="error-msg">‡¶∞‚Äç‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶Æ ‡¶≤‡ßã‡¶°‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ: ${err.message}</p>`;
  }
  loading.style.display = 'none';
}
</script>
</body>
</html>